sap.ui.define(["com/public/storage/pao/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/model/json/JSONModel","com/public/storage/pao/utils/formatter","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/u+
i/model/FilterType"],function(e,t,o,s,n,r,i,a,l){"use strict";var u;return e.extend("com.public.storage.pao.controller.BasicDetails",{formatter:n,onInit:function(){u=this;const e=this.getRouter();e.getRoute("basicDetails").attachMatched(this._onRouteMatc+
hed,this);this._oBusyDialog=new t;this.getView().addDependent(this._oBusyDialog);this.model=new s;this.model.setData({publishedPhoneNo:"None",tollFreeNumber:"None",localPhoneNumber:"None",network1IpAddress:"None",network2IpAddress:"None",KioskActiveDate:+
"None",KioskProperty:"None",GeoCode:"None"});this.getView().setModel(this.model)},_onRouteMatched:function(e){const t=this.getRouter();this.getOwnerComponent.hasChanges=false;const o=this.getOwnerComponent().plant;if(o===undefined){return t.navTo("home")+
}const s=this.getOwnerComponent().LegacyPropertyNumber;this._oModel=sap.ui.getCore().getModel("mainModel");this.readPropertyData(o,s);this.readPlantData(o)},onDetectChange:function(e){this.detectChanges()},readPlantData:function(e){const t=this;const n=`+
/PlantMasterSet`;this._oBusyDialog.open();this._oModel.read(n,{success:function(o){t._oBusyDialog.close();const n=new s(o.results);const r=n.getData().filter(t=>t.Werks===e);t.getOwnerComponent().getModel("plantsModel").setProperty("/Address",r[0].Addres+
s);t.getOwnerComponent().getModel("plantsModel").setProperty("/Email",r[0].Email);t.getOwnerComponent().getModel("plantsModel").setProperty("/Faxnumber",r[0].Faxnumber);t.getOwnerComponent().getModel("plantsModel").setProperty("/Telnumber",r[0].Telnumber+
)},error:function(e){t._oBusyDialog.close();o.show("Something went wrong with Service")}})},_onValueHelpRequestProperty:function(e){this.getOwnerComponent.hasChanges=true;const t=this;var o=e.getSource().getValue(),s=this.getView();if(!this._pValueHelpDi+
alogProp){this._pValueHelpDialogProp=r.load({id:s.getId(),name:"com.public.storage.pao.fragments.BasicDetails.Property",controller:this}).then(function(e){s.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpDialogProp.then(function(e){t+
.readPropertyMasterBuddyData();t._oBusyDialog.close();e.open(o)})},onValueHelpDialogSearchProperty:function(e){var t=e.getParameter("value");var o=new i("Werks",a.Contains,t);var s=new i("Name1",a.Contains,t);var n=new i("Stras",a.Contains,t);var r=new i+
("Pstlz",a.Contains,t);let l=new i({filters:[o,s,n,r],and:false});e.getSource().getBinding("items").filter([l])},onValueHelpDialogConfirmProperty:function(e){let t=e.getParameter("selectedItem");let o=t.getBindingContext("plantsBuddyModel").getObject().N+
ame2;this.getView().byId("budProp").setValue(o)},readPropertyMasterBuddyData:function(){const e=this;this._oBusyDialog.open();return new Promise(function(){e._oModel.read(`/PlantMasterSet`,{success:function(t){e._oBusyDialog.close();const o=new s(t.resul+
ts);e.getOwnerComponent().setModel(o,"plantsBuddyModel");sap.ui.getCore().setModel(o,"plantsBuddyModel")},error:function(t){e._oBusyDialog.close();o.show("Something went wrong with Service")}})})},onPressSaveBasicDetails:function(){this._oBusyDialog.open+
();const e=this;const t=this.getOwnerComponent().plant;const s=this.getOwnerComponent().LegacyPropertyNumber;var n=true;let r="T00:00:00";let i=this.getView().byId("kiskProp").getSelectedKey();let a=this.getView().byId("kisok").getValue().split(".").reve+
rse().join("-");let l=this.getView().byId("geo").getValue();if(a!==""){let e=new Date(a).toISOString().split("T")[0]+r;a=e==="T00:00:00"?null:e}else{a=null}if(i==="Y"&&(a===""||a==null)){this._oBusyDialog.close();return o.show("Kiosk Active Date cannot b+
e blank")}else{}if(i===""){this.model.setProperty("/KioskProperty","Error")}else{this.model.setProperty("/KioskProperty","None")}if(l===""){this.model.setProperty("/GeoCode","Error")}else{this.model.setProperty("/GeoCode","None")}if(l===""||i===""){n=tru+
e}else{n=false}if(n===false){const n={KioskActiveDate:a,KioskProperty:i,BuddyPropertyNumber:this.getView().byId("budProp").getValue(),RetailStoreSquareFootage:this.getView().byId("retailStoreSq").getValue(),HistoricalProperty:this.getView().byId("histPro+
p").getValue(),PsaProperty:this.getView().byId("psaProp").getValue(),TransferFrom:this.getView().byId("transF").getValue(),PropertyEmailAddress:this.getView().byId("email").getValue(),OfficeSquareFootage:this.getView().byId("offSq").getValue(),RetailStor+
ageSize:this.getView().byId("retailST").getValue(),HistoricalOwner:this.getView().byId("histOwner").getValue(),PsaOwner:this.getView().byId("PsaOwner").getValue(),GeoCode:l};const r=`/PropertyMasterSet(Plant='${t}',LegacyPropertyNumber='${s}')`;this._oMo+
del.update(r,n,{success:function(t){o.show(e.getView().getModel("i18n").getResourceBundle().getText("successMsg"));e.getOwnerComponent.hasChanges=false;e._oBusyDialog.close()},error:function(t){o.show(e.getView().getModel("i18n").getResourceBundle().getT+
ext("errorMsg"));e._oBusyDialog.close()}})}else{this._oBusyDialog.close();o.show("Please Fill all mandatory fields")}}})});                                                                                                                                    
//# sourceMappingURL=BasicDetails.controller.js.map                                                                                                                                                                                                            