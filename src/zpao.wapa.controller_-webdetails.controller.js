sap.ui.define(["com/public/storage/pao/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/model/json/JSONModel","com/public/storage/pao/utils/formatter","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/u+
i/model/FilterType"],function(e,t,o,r,s,i,n,l,a){"use strict";var p;return e.extend("com.public.storage.pao.controller.WebDetails",{formatter:s,onInit:function(){p=this;const e=this.getRouter();e.getRoute("webDetails").attachMatched(this._onRouteMatched,+
this);this._oBusyDialog=new t;this.getView().addDependent(this._oBusyDialog);this.model=new r;this.model.setData({PropertyLatitude:"None",PropertyLongitude:"None",PropertyAdminFee:"None",AdminFeeEffectiveDate:"None",PropertyWebsiteReservations:"None",Web+
siteEnabledDate:"None",PropertyCallCenterReservati:"None",CallCenterEnabledDate:"None",PropertyNfsFee:"None",MaxReservationDays:"None",PropertyCallCenterReservati:"None",PropertyNfsAchFee:"None",PropertyInsuranceFrozen:"None",PropertyInsuranceCancelDay:"+
None",PreReservationDays:"None"});this.getView().setModel(this.model)},_onRouteMatched:function(e){this.getOwnerComponent.hasChanges=false;const t=this.getRouter();const o=this.getOwnerComponent().plant;if(o===undefined){return t.navTo("home")}const r=th+
is.getOwnerComponent().LegacyPropertyNumber;this._oModel=sap.ui.getCore().getModel("mainModel");this.readPropertyChurnStatus();this.readClimateControl();this.readPropertyData(o,r)},onValueHelpDialogSearchChurnStatus:function(e){let t=e.getParameter("valu+
e");let o=new n("Description",l.Contains,t);let r=new n("Code",l.Contains,t);let s=new n({filters:[o,r],and:false});e.getSource().getBinding("items").filter([s])},onValueHelpDialogSearchClimateControl:function(e){let t=e.getParameter("value");let o=new n+
("Description",l.Contains,t);let r=new n("Code",l.Contains,t);let s=new n({filters:[o,r],and:false});e.getSource().getBinding("items").filter([s])},_onValueHelpChurnStatus:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const o=this.getVi+
ew();if(!this._pValueHelpChurnStatus){this._pValueHelpChurnStatus=i.load({id:o.getId(),name:"com.public.storage.pao.fragments.WebDetails.ChurnStatus",controller:this}).then(function(e){o.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHel+
pChurnStatus.then(function(e){t._oBusyDialog.close();e.open()})},_onValueHelpClimateControl:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const o=this.getView();if(!this._pValueHelpClimateControl){this._pValueHelpClimateControl=i.load({+
id:o.getId(),name:"com.public.storage.pao.fragments.WebDetails.ClimateControl",controller:this}).then(function(e){o.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpClimateControl.then(function(e){t._oBusyDialog.close();e.open()})},onV+
alueHelpDialogClose:function(e){let t=e.getParameter("selectedItem");let o=e.getSource().getTitle();e.getSource().getBinding("items").filter([]);if(!t){return}let r=t.getDescription();let s=t.getTitle();if(o==="Property Churn Status"){this.getView().getM+
odel("plantBasicDetailsModel").setProperty("/PropertyChurnStatus",`(${s}) ${r}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/churnStatusDesc",`${r}`)}else if(o==="Climate Control"){this.getView().getModel("plantBasicDetailsModel").set+
Property("/ClimateControl",`(${s}) ${r}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/climateControlDesc",`${r}`)}},onDetectChange:function(e){this.detectChanges()},onPressSaveWebDetails:function(){this._oBusyDialog.open();const e=thi+
s;const t=this.getOwnerComponent().plant;const r=this.getOwnerComponent().LegacyPropertyNumber;var s=true;let i="T00:00:00";let n=this.byId("effDate").getValue().split(".").reverse().join("-");let l=this.byId("webenabled").getValue().split(".").reverse()+
.join("-");let a=this.byId("callCenter").getValue().split(".").reverse().join("-");let p=this.byId("nsfFeeEff").getValue().split(".").reverse().join("-");let u=this.byId("nfsAshfeeeff").getValue().split(".").reverse().join("-");let g=n===""?i:new Date(n)+
.toISOString().split("T")[0]+i;let h=l===""?i:new Date(l).toISOString().split("T")[0]+i;let y=a===""?i:new Date(a).toISOString().split("T")[0]+i;let d=p===""?i:new Date(p).toISOString().split("T")[0]+i;let c=u===""?i:new Date(u).toISOString().split("T")[+
0]+i;n=g==="T00:00:00"?null:g;l=h==="T00:00:00"?null:h;a=y==="T00:00:00"?null:y;p=d==="T00:00:00"?null:d;u=c==="T00:00:00"?null:c;let m=this.getView().byId("propLat").getValue();let P=this.getView().byId("propLong").getValue();let f=this.getView().byId("+
propAdmin").getValue();let C=this.getView().byId("propWeb").getSelectedKey();let V=this.getView().byId("propCall").getSelectedKey();let D=this.getView().byId("propNFS").getValue();let w=this.getView().byId("maxRes").getValue();let b=this.getView().byId("+
propNFSACH").getValue();let I=this.getView().byId("propFrozen").getSelectedKey();let N=this.getView().byId("propIns").getValue();let S=this.getView().byId("propResDay").getValue();if(m===""){this.model.setProperty("/PropertyLatitude","Error")}else{this.m+
odel.setProperty("/PropertyLatitude","None")}if(P===""){this.model.setProperty("/PropertyLongitude","Error")}else{this.model.setProperty("/PropertyLongitude","None")}if(f===""){this.model.setProperty("/PropertyAdminFee","Error")}else{this.model.setProper+
ty("/PropertyAdminFee","None")}if(C===""||C==="B"){this.model.setProperty("/PropertyWebsiteReservations","Error")}else{this.model.setProperty("/PropertyWebsiteReservations","None")}if(V===""||V==="B"){this.model.setProperty("/PropertyCallCenterReservati"+
,"Error")}else{this.model.setProperty("/PropertyCallCenterReservati","None")}if(D===""){this.model.setProperty("/PropertyNfsFee","Error")}else{this.model.setProperty("/PropertyNfsFee","None")}if(w===""){this.model.setProperty("/MaxReservationDays","Error+
")}else{this.model.setProperty("/MaxReservationDays","None")}if(b===""){this.model.setProperty("/PropertyNfsAchFee","Error")}else{this.model.setProperty("/PropertyNfsAchFee","None")}if(I===""){this.model.setProperty("/PropertyInsuranceFrozen","Error")}el+
se{this.model.setProperty("/PropertyInsuranceFrozen","None")}if(N===""){this.model.setProperty("/PropertyInsuranceCancelDay","Error")}else{this.model.setProperty("/PropertyInsuranceCancelDay","None")}if(S===""){this.model.setProperty("/PreReservationDays+
","Error")}else{this.model.setProperty("/PreReservationDays","None")}if(m===""||P===""||f===""||C===""||C==="B"||V===""||V==="B"||D===""||w===""||b===""||I===""||N===""||S===""){s=true}else{s=false}if(s===false){const s={PropertyLatitude:this.getView().b+
yId("propLat").getValue(),PropertyLongitude:this.getView().byId("propLong").getValue(),PropertyAdminFee:this.getView().byId("propAdmin").getValue(),AdminFeeEffectiveDate:n,PropertyChurnStatus:this.getView().byId("propChurn").getValue(),ClimateControl:thi+
s.getView().byId("climControl").getValue(),PropertyWebsiteReservations:this.getView().byId("propWeb").getSelectedKey(),WebsiteEnabledDate:l,PropertyCallCenterReservati:this.getView().byId("propCall").getSelectedKey(),CallCenterEnabledDate:a,PropertyNfsFe+
e:this.getView().byId("propNFS").getValue(),MaxReservationDays:this.getView().byId("maxRes").getValue(),NsfFeeEffectiveDate:p,PropertyNfsAchFee:this.getView().byId("propNFSACH").getValue(),NfsAchFeeEffectiveDate:u,PropertyInsuranceFrozen:this.getView().b+
yId("propFrozen").getSelectedKey(),PropertyInsuranceCancelDay:this.getView().byId("propIns").getValue(),PreReservationDays:this.getView().byId("propResDay").getValue()};const i=`/PropertyMasterSet(Plant='${t}',LegacyPropertyNumber='${r}')`;this._oModel.u+
pdate(i,s,{success:function(t){e.getOwnerComponent.hasChanges=false;o.show("Saved Successfully");e._oBusyDialog.close()},error:function(t){o.show("Something went wrong with Service");e._oBusyDialog.close()}})}else{this._oBusyDialog.close();o.show("Please+
 Fill all mandatory fields")}}})});                                                                                                                                                                                                                            
//# sourceMappingURL=WebDetails.controller.js.map                                                                                                                                                                                                              