sap.ui.define(["com/public/storage/pao/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","com/public/storage/pao/utils/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/u+
i/model/FilterType"],function(e,t,n,o,i,a,l,s,r){"use strict";var u;return e.extend("com.public.storage.pao.controller.TaxDetails",{formatter:a,onInit:function(){u=this;const e=this.getRouter();e.getRoute("taxDetails").attachMatched(this._onRouteMatched,+
this);this._oBusyDialog=new t;this.getView().addDependent(this._oBusyDialog);this.model=new i;this.model.setData({TaxOwner:"None",TaxOwnerFein:"None",LegalOwner:"None",LegalOwnerFein:"None",OwnerOfRecord:"None",solarEntity:"None"});this.getView().setMode+
l(this.model)},_onRouteMatched:function(e){const t=this.getRouter();this.getOwnerComponent.hasChanges=false;const n=this.getOwnerComponent().plant;if(n===undefined){return t.navTo("home")}const o=this.getOwnerComponent().LegacyPropertyNumber;this._oModel+
=sap.ui.getCore().getModel("mainModel");this.readPropertyData(n,o);this.readTaxOwner();this.readSolarEntity();this.readLegalOwner()},onValueHelpDialogSearchTaxOwner:function(e){let t=e.getParameter("value");let n=new l("Description",s.Contains,t);let o=n+
ew l("Code",s.Contains,t);let i=new l({filters:[n,o],and:false});e.getSource().getBinding("items").filter([i])},onValueHelpDialogSearchLegalOwner:function(e){let t=e.getParameter("value");let n=new l("Description",s.Contains,t);let o=new l("Code",s.Conta+
ins,t);let i=new l({filters:[n,o],and:false});e.getSource().getBinding("items").filter([i])},onValueHelpDialogSearchSolarENtity:function(e){let t=e.getParameter("value");let n=new l("Description",s.Contains,t);let o=new l("Company",s.Contains,t);let i=ne+
w l({filters:[n,o],and:false});e.getSource().getBinding("items").filter([i])},_onValueHelpTaxOwner:function(e){this.getOwnerComponent.hasChanges=true;this.selectedField=e.getSource().getCustomData()[0].getValue();const t=this;const n=this.getView();if(!t+
his._pValueHelpTaxOwner){this._pValueHelpTaxOwner=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.TaxOwner",controller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpTaxOwner.then(func+
tion(e){t._oBusyDialog.close();e.open()})},_onValueHelpTaxOwnerFein:function(e){const t=this;const n=this.getView();if(!this._pValueHelpTaxOwnerFein){this._pValueHelpTaxOwnerFein=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.TaxO+
wnerFein",controller:this}).then(function(e){n.addDependent(e);return e})}this._pValueHelpTaxOwnerFein.then(function(e){e.open()})},_onValueHelpLegalOwner:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const n=this.getView();if(!this._pV+
alueHelpLegalOwner){this._pValueHelpLegalOwner=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.LegalOwner",controller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpLegalOwner.then(fun+
ction(e){t._oBusyDialog.close();e.open()})},_onValueHelpLegalOwnerFein:function(e){const t=this;const n=this.getView();if(!this._pValueHelpLegalOwnerFein){this._pValueHelpLegalOwnerFein=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetai+
ls.LegalOwnerFein",controller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpLegalOwnerFein.then(function(e){t._oBusyDialog.close();e.open()})},_onValueHelOwnerRecord:function(e){const t=this;const n=this.ge+
tView();if(!this._pValueHelpOwnerRecord){this._pValueHelpOwnerRecord=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.OwnerofRecord",controller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pVal+
ueHelpOwnerRecord.then(function(e){t._oBusyDialog.close();e.open()})},_onValueHelpSolarEntity:function(e){const t=this;this.selectedField=e.getSource().getCustomData()[0].getValue();const n=this.getView();if(!this._pValueHelpTaxFillingEntity){this._pValu+
eHelpTaxFillingEntity=o.load({id:n.getId(),name:"com.public.storage.pao.fragments.TaxDetails.SolarEntity",controller:this}).then(function(e){n.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpTaxFillingEntity.then(function(e){t._oBusyD+
ialog.close();e.open()})},onDetectChange:function(e){this.detectChanges()},onValueHelpDialogClose:function(e){let t=e.getParameter("selectedItem");let n=e.getSource().getTitle();if(!t){return}let o=t.getDescription();let i=t.getTitle();let a=t.getInfo();+
if(n==="Tax Owner"&&this.selectedField==="taxOwner"){this.getView().getModel("plantBasicDetailsModel").setProperty("/TaxOwner",`(${i}) ${o}`)}if(n==="Legal Owner"){this.getView().getModel("plantBasicDetailsModel").setProperty("/LegalOwner",`(${i}) ${o}`)+
}if(this.selectedField==="solaren"&&n==="Solar Entity"){this.getView().getModel("plantBasicDetailsModel").setProperty("/SolarEntity",`(${i}) ${o}`)}},onPressSaveTaxDetails:function(){const e=this;this._oBusyDialog.open();const t=this.getOwnerComponent().+
plant;const o=this.getOwnerComponent().LegacyPropertyNumber;const i=this.byId("taxOwner").getValue();const a=this.byId("taxOwnerFein").getValue();const l=this.byId("legalOwner").getValue();const s=this.byId("legalOwnerFein").getValue();const r=this.byId(+
"ownerRecord").getValue();const u=this.byId("solarenitity").getValue();const c={TaxOwner:i,TaxOwnerFein:a,LegalOwner:l,LegalOwnerFein:s,OwnerOfRecord:r,SolarEntity:u};const g=`/PropertyMasterSet(Plant='${t}',LegacyPropertyNumber='${o}')`;this._oModel.upd+
ate(g,c,{success:function(t){e._oBusyDialog.close();e.getOwnerComponent.hasChanges=false;n.show("Saved Successfully")},error:function(t){e._oBusyDialog.close();n.show("Something went wrong with Service")}})}})});                                           
//# sourceMappingURL=TaxDetails.controller.js.map                                                                                                                                                                                                              