sap.ui.define(["com/public/storage/paoro/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/model/json/JSONModel","com/public/storage/paoro/utils/formatter","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","s+
ap/ui/model/FilterType"],function(e,t,o,i,s,l,a,n,r){"use strict";var u;return e.extend("com.public.storage.paoro.controller.SupplementalDetails",{formatter:s,onInit:function(){u=this;const e=this.getRouter();e.getRoute("propSuppDeatils").attachMatched(t+
his._onRouteMatched,this);this._oBusyDialog=new t;this.getView().addDependent(this._oBusyDialog);this.model=new i;this.model.setData({JSONModel:"None"});this.getView().setModel(this.model)},_onRouteMatched:function(e){const t=this.getRouter();this.getOwn+
erComponent.hasChanges=false;const o=this.getOwnerComponent().plant;if(o===undefined){return t.navTo("home")}const i=this.getOwnerComponent().LegacyPropertyNumber;this._oModel=sap.ui.getCore().getModel("mainModel");this.readConstructionCode();this.readPr+
opertyData(o,i)},_onValueHelpConstructionCode:function(e){this.getOwnerComponent.hasChanges=true;this.selectedField=e.getSource().getCustomData()[0].getValue();const t=this;const o=this.getView();if(!this._pValueHelpClimateControl){this._pValueHelpClimat+
eControl=l.load({id:o.getId(),name:"com.public.storage.paoro.fragments.Supplemental.ConstructionCode",controller:this}).then(function(e){o.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpClimateControl.then(function(e){t._oBusyDialog.+
close();e.open()})},onDetectChange:function(e){this.detectChanges()},onValueHelpDialogClose:function(e){let t=e.getParameter("selectedItem");let o=e.getSource().getTitle();if(!t){return}let i=t.getDescription();let s=t.getTitle();if(o==="Construction Cod+
e"&&this.selectedField==="constCode"){this.getView().getModel("plantBasicDetailsModel").setProperty("/ConstructionCode",`(${s}) ${i}`)}if(o==="Construction Code"&&this.selectedField==="constCode2"){this.getView().getModel("plantBasicDetailsModel").setPro+
perty("/ConstructionCode2",`(${s}) ${i}`)}if(o==="Climate Control"){this.getView().getModel("plantBasicDetailsModel").setProperty("/ClimateControl",`(${s}) ${i}`)}if(o==="Year Built"){this.getView().getModel("plantBasicDetailsModel").setProperty("/YearBu+
ilt",`${s}`)}},_onValueHelpYearBuild:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const o=this.getView();if(!this._pValueHelpYearBuilt){this._pValueHelpYearBuilt=l.load({id:o.getId(),name:"com.public.storage.paoro.fragments.Supplementa+
l.YearBuilt",controller:this}).then(function(e){o.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpYearBuilt.then(function(e){t._oBusyDialog.close();e.open()})},onValueHelpDialogYBuild:function(e){let t=e.getParameter("value");let o=ne+
w a("year",n.Contains,t);e.getSource().getBinding("items").filter([o])},onValueHelpDialogSearchCC:function(e){let t=e.getParameter("value");let o=new a("Description",n.Contains,t);let i=new a("Code",n.Contains,t);let s=new a({filters:[o,i],and:false});e.+
getSource().getBinding("items").filter([s])},onPressSaveSuppDetails:function(){this._oBusyDialog.open();const e=this.getOwnerComponent().plant;const t=this;const i=this.getOwnerComponent().LegacyPropertyNumber;var s=true;let l="T00:00:00";let a=this.byId+
("floodeffdate").getValue().split(".").reverse().join("-");let n=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-dd"}).format(new Date(a))+l;a=n==="T00:00:00"?null:n;let r=this.getView().byId("apart").getSelectedKey();let u=this.byId("yea+
r").getValue();let g=this.byId("officeCount").getValue();let d=this.byId("restRoomCount").getValue();if(r===""){this.model.setProperty("/Apartments","Error")}else{this.model.setProperty("/Apartments","None")}if(r===""){s=true}else{s=false}if(s===false){c+
onst s={Lockers:this.getView().byId("lock").getSelectedKey(),LargeTruckAccess:this.getView().byId("truck").getSelectedKey(),FurnitureDollies:this.getView().byId("furniture").getSelectedKey(),Basement:this.getView().byId("base").getSelectedKey(),HandTruck+
s:this.getView().byId("hand").getSelectedKey(),Carts:this.getView().byId("cart").getSelectedKey(),YearBuilt:u,CapIndexRisk:this.getView().byId("capIndex").getValue(),NumberOfBuildings:this.getView().byId("noOfBuild").getValue(),ConstructionCode:this.getV+
iew().byId("constCode").getValue(),NumberOfStories:this.getView().byId("noOfStories").getValue(),ConstructionCode2:this.getView().byId("constCode2").getValue(),LotSize:this.getView().byId("lotSize").getValue(),BuildingClassification:this.getView().byId("+
buildClass").getValue(),GrossSquareFootage:this.getView().byId("grossSQFoot").getValue(),FloodZone:this.getView().byId("floodzone").getSelectedKey(),MilesOfCostalWater25:this.getView().byId("tfmilesCoastWater").getValue(),Sprinkler:this.getView().byId("s+
prink").getSelectedKey(),SprinklerRemark:this.getView().byId("sprinkRem").getValue(),FireAlarm:this.getView().byId("fireAlarm").getSelectedKey(),FireAlarmRemarks:this.getView().byId("fireAlarmRemark").getValue(),BuglerAlarm:this.getView().byId("bugalarm"+
).getSelectedKey(),BuglerAlarmRemarks:this.getView().byId("bugAlarmRemark").getValue(),ParkingSpaces:this.getView().byId("park").getSelectedKey(),Elevators:this.getView().byId("elevater").getSelectedKey(),Apartments:r,SurvellianceCamera:this.getView().by+
Id("camera").getSelectedKey(),SurvellianceCameraRemarks:this.getView().byId("surCamRemarks").getValue(),OfficeCount:g,RestroomCount:d,FloodInsEffDate:a};const l=`/PropertyMasterSet(Plant='${e}',LegacyPropertyNumber='${i}')`;this._oModel.update(l,s,{succe+
ss:function(e){t._oBusyDialog.close();t.getOwnerComponent.hasChanges=false;o.show("Saved Successfully")},error:function(e){t._oBusyDialog.close();o.show("Something went wrong with Service")}})}else{this._oBusyDialog.close();o.show("Please Fill all mandat+
ory fields")}}})});                                                                                                                                                                                                                                            
//# sourceMappingURL=SupplementalDetails.controller.js.map                                                                                                                                                                                                     