sap.ui.define(["com/public/storage/paoro/utils/reusecontroller","sap/m/BusyDialog","sap/m/MessageToast","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","com/public/storage/paoro/utils/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","s+
ap/ui/model/FilterType"],function(e,t,i,o,n,s,l,r,a){"use strict";var p;return e.extend("com.public.storage.paoro.controller.BUDetails",{formatter:s,onInit:function(){p=this;const e=this.getRouter();e.getRoute("buDetails").attachMatched(this._onRouteMatc+
hed,this);this._oBusyDialog=new t;this.getView().addDependent(this._oBusyDialog);this.model=new n;this.model.setData({Active:"None",BusinessUnitType:"None",CustomerCode:"None",EntityType:"None",CombinedSurvivingNumber:"None",ATypeProperty:"None"});this.g+
etView().setModel(this.model)},_onRouteMatched:function(e){const t=this.getRouter();this.getOwnerComponent.hasChanges=false;const i=this.getOwnerComponent().plant;if(i===undefined){return t.navTo("home")}const o=this.getOwnerComponent().LegacyPropertyNum+
ber;this._oModel=sap.ui.getCore().getModel("mainModel");const n=this;const s=e.getParameter("arguments");const l=this.getView();this._Plant=s.plant;this.readPropertyData(i,o);this.readBUType();n.readCustomerCode();n.readEntityType();n.readATypeProp();n.r+
eadAquiredDeveloperTP();this.readActive()},_onValueHelpActive:function(e){const t=this;const i=this.getView();if(!this._pValueHelpActivey){this._pValueHelpActivey=o.load({id:i.getId(),name:"com.public.storage.paoro.fragments.BUDetails.Active",controller:+
this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpActivey.then(function(e){t._oBusyDialog.close();e.open()})},onValueHelpDialogSearchBuType:function(e){let t=e.getParameter("value");let i=new l("Description",r.+
Contains,t);let o=new l("Code",r.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchCCcode:function(e){let t=e.getParameter("value");let i=new l("Description",r.Contains,t);let o=new l+
("Code",r.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchEntityType:function(e){let t=e.getParameter("value");let i=new l("Description",r.Contains,t);let o=new l("Code",r.Contains,+
t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchCombinedSno:function(e){let t=e.getParameter("value");let i=new l("Name2",r.Contains,t);e.getSource().getBinding("items").filter([i])},onValue+
HelpDialogSearchAtypeProp:function(e){let t=e.getParameter("value");let i=new l("Description",r.Contains,t);let o=new l("Code",r.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchActi+
ve:function(e){let t=e.getParameter("value");let i=new l("Description",r.Contains,t);let o=new l("Code",r.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},onValueHelpDialogSearchAquiredTp:function(e){let t+
=e.getParameter("value");let i=new l("Description",r.Contains,t);let o=new l("Code",r.Contains,t);let n=new l({filters:[i,o],and:false});e.getSource().getBinding("items").filter([n])},_onValueHelpBUnit:function(e){this.getOwnerComponent.hasChanges=true;c+
onst t=this;const i=this.getView();if(!this._pValueHelpBUnit){this._pValueHelpBUnit=o.load({id:i.getId(),name:"com.public.storage.paoro.fragments.BUDetails.Businessunit",controller:this}).then(function(e){i.addDependent(e);return e})}this._pValueHelpBUni+
t.then(function(e){e.open()})},_onValueHelpActive:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const i=this.getView();if(!this._pValueHelpActive){this._pValueHelpActive=o.load({id:i.getId(),name:"com.public.storage.paoro.fragments.BUDe+
tails.Active",controller:this}).then(function(e){i.addDependent(e);return e})}this._pValueHelpActive.then(function(e){e.open()})},_onValueHelpCustCode:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const i=this.getView();if(!this._pValue+
HelpCustCode){this._pValueHelpCustCode=o.load({id:i.getId(),name:"com.public.storage.paoro.fragments.BUDetails.Customercode",controller:this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpCustCode.then(function(e+
){t._oBusyDialog.close();e.open()})},_onValueHelpEntityType:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const i=this.getView();if(!this._pValueHelpEntityType){this._pValueHelpEntityType=o.load({id:i.getId(),name:"com.public.storage.pa+
oro.fragments.BUDetails.Entitytype",controller:this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpEntityType.then(function(e){t._oBusyDialog.close();e.open()})},_onValueHelpComSurvNumber:function(e){this.getOwne+
rComponent.hasChanges=true;const t=this;const i=this.getView();if(!this._pValueHelpComSurvNumber){this._pValueHelpComSurvNumber=o.load({id:i.getId(),name:"com.public.storage.paoro.fragments.BUDetails.Comsurvivingnumber",controller:this}).then(function(e)+
{i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpComSurvNumber.then(function(e){t._oBusyDialog.close();e.open()})},_onValueHelpComATypeProp:function(e){this.getOwnerComponent.hasChanges=true;const t=this;const i=this.getView();if(!t+
his._pValueHelpTypeProp){this._pValueHelpTypeProp=o.load({id:i.getId(),name:"com.public.storage.paoro.fragments.BUDetails.ATypeProperty",controller:this}).then(function(e){i.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpTypeProp.the+
n(function(e){t._oBusyDialog.close();e.open()})},_onValueHelpComThirdParty:function(){this.getOwnerComponent.hasChanges=true;const e=this;const t=this.getView();if(!this._pValueHelpThirdParty){this._pValueHelpThirdParty=o.load({id:t.getId(),name:"com.pub+
lic.storage.paoro.fragments.BUDetails.AquiredThirdParty",controller:this}).then(function(e){t.addDependent(e);return e})}this._oBusyDialog.open();this._pValueHelpThirdParty.then(function(t){e._oBusyDialog.close();t.open()})},onValueHelpDialogClose:functi+
on(e){let t=e.getParameter("selectedItem");let i=e.getSource().getTitle();if(!t){return}let o=t.getDescription();let n=t.getTitle();if(i==="Business Unit"){this.getView().getModel("plantBasicDetailsModel").setProperty("/BusinessUnitType",`(${n}) ${o}`);t+
his.getView().getModel("plantBasicDetailsModel").setProperty("/bTypeDesc",`${o}`)}else if(i==="Customer Code"){this.getView().getModel("plantBasicDetailsModel").setProperty("/CustomerCode",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").+
setProperty("/custCodeDesc",`${o}`)}else if(i==="Active"){this.getView().getModel("plantBasicDetailsModel").setProperty("/Active",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/ActiveDesc",`${o}`)}else if(i==="Entity Type"+
){this.getView().getModel("plantBasicDetailsModel").setProperty("/EntityType",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/entityTypeDesc",`${o}`)}else if(i==="Property Type Model"){this.getView().getModel("plantBasicDet+
ailsModel").setProperty("/ATypeProperty",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/aTypeDesc",`${o}`)}else if(i==="Combined Surviving Number"){this.getView().getModel("plantBasicDetailsModel").setProperty("/CombinedSu+
rvivingNumber",n)}else if(i==="Aquired Third Party"){this.getView().getModel("plantBasicDetailsModel").setProperty("/AcquiredDevelopedThirdP",`(${n}) ${o}`);this.getView().getModel("plantBasicDetailsModel").setProperty("/aquiredTpDesc",`${o}`)}},onDetect+
Change:function(e){this.detectChanges()},onPressSaveBUDetails:function(){this._oBusyDialog.open();const e=this;let t=true;const o=this.getOwnerComponent().plant;const n=this.getOwnerComponent().LegacyPropertyNumber;let s=this.byId("active").getValue();va+
r l="/(([^)]+))/";let r=this.byId("bType").getValue();let a=this.byId("cCode").getValue();let p=this.byId("entityType").getValue();let u=this.byId("combinedServ").getValue();let d=this.byId("atypeProp").getValue();let c=this.byId("bType").getValue();let +
g=this.byId("aquiredFromTP").getValue();let h=this.getView().byId("trafficMonitoring").getSelectedKey();if(s===""||s===undefined){this.model.setProperty("/Active","Error")}else{this.model.setProperty("/Active","None")}if(r===""||r===undefined){this.model+
.setProperty("/BusinessUnitType","Error")}else{this.model.setProperty("/BusinessUnitType","None")}if(a===""||a===undefined){this.model.setProperty("/CustomerCode","Error")}else{this.model.setProperty("/CustomerCode","None")}if(p===""||p===undefined){this+
.model.setProperty("/EntityType","Error")}else{this.model.setProperty("/EntityType","None")}if(d===""||d===undefined){this.model.setProperty("/ATypeProperty","Error")}else{this.model.setProperty("/ATypeProperty","None")}if(r===""||s===""||a===""||p===""|+
|d===""){t=true}else{t=false}if(t===false){const t={Active:s,BusinessUnitType:c,CustomerCode:a,EntityType:p,CombinedSurvivingNumber:u,Note1:this.getView().byId("note1").getValue(),Note2:this.getView().byId("note2").getValue(),Note3:this.getView().byId("n+
ote3").getValue(),ATypeProperty:d,BillBoard:this.getView().byId("bill").getSelectedKey(),Comercial:this.getView().byId("comm").getSelectedKey(),CellTower:this.getView().byId("cell").getSelectedKey(),Solar:this.getView().byId("solar").getSelectedKey(),Acq+
uiredFrom:this.getView().byId("aquiredFrom").getValue(),AcquiredDevelopedThirdP:g,Psd:this.getView().byId("psd").getValue(),TrafficMonitoring:h};const l=`/PropertyMasterSet(Plant='${o}',LegacyPropertyNumber='${n}')`;this._oModel.update(l,t,{success:funct+
ion(t){e._oBusyDialog.close();e.getOwnerComponent.hasChanges=false;i.show(e.getView().getModel("i18n").getResourceBundle().getText("successMsg"))},error:function(t){e._oBusyDialog.close();i.show(e.getView().getModel("i18n").getResourceBundle().getText("e+
rrorMsg"))}})}else{this._oBusyDialog.close();i.show("Fill in all mandatory fields")}}})});                                                                                                                                                                     
//# sourceMappingURL=BUDetails.controller.js.map                                                                                                                                                                                                               